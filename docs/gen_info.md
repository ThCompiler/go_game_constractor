---
comments: true
---
---
title: "Генератор"
---

## Описание

Генератор является исполняемым файлом, которое создаёт код скилла для Маруси и код базового http-сервера.
Генератор имеет несколько функций:

* Генерация скилла без сохранения изменений
* Генерация скилла с сохранением изменений
* Генерация http-сервера
* Выбор места сохранения сгенерированного кода

Ожидается, что после первой генерации и внесения требуемых изменений для бизнес логики, запуски для текущего файла конфигураций будут происходит с флагом `-u | --update`.
Таким образом поддерживаются пользовательские изменения в коде, т.к. для полностью корректной работы или/и добавления сложной бизнес-логики, 
требуется участие разработчика и соответственно внесение изменений в текущий код. 


> <h4>Важно</h4> 
> Без флага `--update` все внесённый изменения будут **утеряны**

В файлах, где **изменений не подразумеваются или не желательны**, в их начале указывается строка `DO NOT EDIT`.
После внесения изменений в данных файлах могут **потребоваться** корректировки в других сгенерированных файлах для сохранения правильной работы скилла.

---------------------------------

### Использование

```(cmd)
scg ( (-o | --output=<file>) (-s | --script=<file>) | [options] | (-v | --version) | (-h | --help) )
```

##### Опции
- `-o --output=<file>` - путь к директории куда надо сохранить сгенерированные файлы
- `-s --script=<file>` - путь к файлу с описанием
- `-v --version` - показывает версию исполняемого файла
- `-u --update` - выполнить генерацию с сохранением пользовательских файлов
- `--http-server` - Генерирует базовый http-сервер
- `-h --help` - информация о работе с генератором

##### Уточнение
Флаг `--update` сохраняет изменения пользователя.
Новые сгенерированные строки, отличные от строк в текущей версии файлов, будут записаны как комментарии. этих строк в  будут вставлены в текущий код
Эти комментарии ограничены строками ```// >>>>>>> Generated```.
Решение о применении изменений остается за вами, так же как и решение об удалении ненужного функциональна.


><h5>hint</h5> 
> Пример сгенерированных файлов можно найти в папке [example](https://github.com/ThCompiler/go_game_constractor/tree/main/scg/example)
в разделе **scg** нашего репозитория.

---------------------------------

### О сгенерированных файлах

Генератор создаст хранилище текстов в `Redis`, а также менеджер этих текстов с подставлением параметров. 
Хранилище будет находится в папке `scg/skill_name/cmd/internal/texts/store`, а менеджер - `scg/skill_name/cmd/internal/texts/manager`.

Для инициализации хранилище генерируется функция `SaveScripts`, которая добавляет в хранилище тексты, если их ещё там и удаляет тексты предыдущих генераций.
Данная функция находится в папке `scg/skill_name/cmd/internal/texts/store/storesaver`.
