---
title: "Структуры"
---

## [](#request)`Request`

В этой структуре доступны поля, передаваемые Марусей, с которыми разработчик может взаимодействовать внутри приложения.

| Поле           | Тип      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `command`      | `string` | Пользовательский текст, очищенный от слов, не влияющих на смысл предложения. В ходе преобразования текст, в частности, очищается от знаков препинания, удаляются обращения к Марусе и слова, выражающие просьбу, например «пожалуйста», «слушай» и т. д., числительные преобразуются в числа. При завершении скилла (по команде «стоп», «выход» и так далее) в него будет передана команда `on_interrupt`, чтобы у скилла была возможность попрощаться с пользователем. |
| `fullUserText` | `string` | Полный текст пользовательского запроса, максимум 1024 символа.                                                                                                                                                                                                                                                                                                                                                                                                          |
| `payload`      | `object` | JSON, полученный с нажатой кнопкой от обработчика скилла (в ответе на предыдущий запрос), максимум 4096 байт.                                                                                                                                                                                                                                                                                                                                                           |
| `wasButton`    | `bool`   | Была ли нажата кнопка                                                                                                                                                                                                                                                                                                                                                                                                                                                   |

# SceneMessage

Структура с данными, которые используются в сцене. Заполняется из [request](lib_marusia_structs.md#request-marusia)

| Поле        | Тип                   | Описание                       |
|-------------|-----------------------|--------------------------------|
| `userId`    | `string`              | Id пользователя                |
| `sessionId` | `string`              | Id сессии                      |
| `answer`    | `object`              | Ответ пользователю после сцены |
| `rq`        | [`request`](#request) | Запрос                         |

# Director
Директор используется для управления сценами.
```go
type director struct {
	// Движок сервера
	hub       *ScriptHub
	// Реализация сцены - метода PlayScene
	op        drt.Director
	// Id сессии
	sessionId string
}

type Director interface {
    PlayScene(command SceneRequest) Result
}
```
# ScriptHub
Является "движком" сервера
```go
type ScriptHub struct {
    directors map[string]*director
    broadcast chan *sceneMessage
    attacher  chan *director
    dettacher chan *director
    stopHub   chan bool
}
```
